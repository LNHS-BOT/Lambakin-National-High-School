;/*FB_PKG_DELIM*/

__d("MWV2MediaViewerItemImage.react",["fbt","I64","MWAnimatedImageControlsUtil","MWAnimatedImageThumbnailWithPlayButton.react","MWV2MediaViewerContext.react","MWXPressable.react","MessagingAttachmentType","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useContext,m=b.useEffect,n=b.useRef,o=b.useState;function a(a){var b=d("react-compiler-runtime").c(28),e=a.attachment,f=a.mediaRenderQpl;a=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting();var g=l(d("MWV2MediaViewerContext.react").context),i=g.getPlayableUrl;g=g.heroLoggingComponent;var p=n(null),q=o(!1),r=q[0],s=q[1],t;b[0]!==f?(q=function(){var a;p.current!=null&&((a=p.current)==null?void 0:a.complete)&&f.endSuccess()},t=[f],b[0]=f,b[1]=q,b[2]=t):(q=b[1],t=b[2]);m(q,t);b[3]!==e.previewHeight||b[4]!==e.previewHeightLarge?(q=e.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(e.previewHeightLarge):e.previewHeight!=null?(j||(j=d("I64"))).to_float(e.previewHeight):void 0,b[3]=e.previewHeight,b[4]=e.previewHeightLarge,b[5]=q):q=b[5];t=q;b[6]!==e.previewWidth||b[7]!==e.previewWidthLarge?(q=e.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(e.previewWidthLarge):e.previewWidth!=null?(j||(j=d("I64"))).to_float(e.previewWidth):void 0,b[6]=e.previewWidth,b[7]=e.previewWidthLarge,b[8]=q):q=b[8];q=q;var u=(j||(j=d("I64"))).to_int32(e.attachmentType)===c("MessagingAttachmentType").ANIMATED_IMAGE,v;b[9]!==u?(v=u&&d("MWAnimatedImageControlsUtil").getShouldEnableGIFPlayPause(),b[9]=u,b[10]=v):v=b[10];u=v;if(u&&a==null)return null;b[11]!==e||b[12]!==i||b[13]!==f?(v=i(e,"MediaViewerImage",f),b[11]=e,b[12]=i,b[13]=f,b[14]=v):v=b[14];i=v;if(i!=null){var w=u&&a===!1;b[15]!==g?(v=g("MWV2MediaViewerImage"),b[15]=g,b[16]=v):v=b[16];b[17]!==e||b[18]!==w||b[19]!==t||b[20]!==r||b[21]!==f||b[22]!==i||b[23]!==q?(u=w?k.jsx("div",{className:"xr1yuqi xkrivgy x4ii5y1 x1gryazu x1ja2u2z",children:r===!1?k.jsx(c("MWAnimatedImageThumbnailWithPlayButton.react"),{connectBottom:!1,connectTop:!1,dbAttachment:e,isInMediaViewer:!0,isInThread:!1,mediaRenderQpl:f,message:null,onPlay:function(){return s(!0)},outgoing:!1,previewHeight:t,previewWidth:q}):k.jsx(c("MWXPressable.react"),{"aria-label":h._(/*BTDS*/"__JHASH__210-OYWdJBG__JHASH__"),onPress:function(){w&&s(!1)},children:k.jsx("img",babelHelpers["extends"]({className:"xmz0i5r x193iq5w"},{onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:p,src:i}))})}):k.jsx(k.Fragment,{children:k.jsx("img",babelHelpers["extends"]({className:"xr1yuqi xkrivgy x4ii5y1 x1gryazu xmz0i5r x193iq5w"},{onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:p,src:i}))}),b[17]=e,b[18]=w,b[19]=t,b[20]=r,b[21]=f,b[22]=i,b[23]=q,b[24]=u):u=b[24];b[25]!==v||b[26]!==u?(a=k.jsxs(k.Fragment,{children:[v,u]}),b[25]=v,b[26]=u,b[27]=a):a=b[27];return a}else{f.endFail("missing-playable-url");return null}}g["default"]=a}),226);